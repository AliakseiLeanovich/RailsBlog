<div class="page-header">
  <%= link_to new_role_path, class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    New Role
  <% end %>
  <h1>Listing roles</h1>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Users</th>
            <th>Create ability</th>
            <th>Read ability</th>
            <th>Update ability</th>
            <th>Delete ability</th>
            <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <%= content_tag_for(:tr, @roles) do |role| %>
            <td><%= role.title %></td>
            <td><%= role.description %></td>
            <td><%= role.users.map{|user| user.nickname}.join(', ').html_safe %></td>
            <td>
            <% if role.create_ability %>
            <span class="glyphicon glyphicon-plus"></span>          
            <% else %>
            <span class="glyphicon glyphicon-minus"></span>
            <% end %>            
            </td>
            <td>
            <% if role.read_ability %>
            <span class="glyphicon glyphicon-plus"></span>          
            <% else %>
            <span class="glyphicon glyphicon-minus"></span>
            <% end %>
            </td>
            <td>
            <% if role.update_ability %>
            <span class="glyphicon glyphicon-plus"></span>          
            <% else %>
            <span class="glyphicon glyphicon-minus"></span>
            <% end %>
            </td>
            <td>
            <% if role.delete_ability %>
            <span class="glyphicon glyphicon-plus"></span>          
            <% else %>
            <span class="glyphicon glyphicon-minus"></span>
            <% end %>
            </td>
            <td><%= link_to 'Show', role %></td>
        <td><%= link_to 'Edit', edit_role_path(role) %></td>
        <td><%= link_to 'Destroy', role, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <% end %>
    </tbody>
  </table>
</div>
